{% set header_is_admin = is_admin or session.get("is_admin") %}
{% set header_username = me_username or session.get("me_username") %}
<header class="flex flex-wrap items-center justify-between gap-4 rounded-2xl border border-slate-800/70 bg-slate-900/70 px-6 py-4 shadow-md shadow-slate-950/30 ring-1 ring-white/5">
  <div class="flex items-center gap-3">
    <img
      src="{{ branding_header_logo or url_for('static', filename='img/logo.svg') }}"
      alt="Chaotic Nexus"
      class="h-10 w-auto rounded-md bg-slate-950/60 p-2 ring-1 ring-white/10"
    />
    <div>
      <p class="text-xs uppercase tracking-wider text-slate-400">Victoria Powder Coating</p>
      <h1 class="text-lg font-semibold text-slate-100">Chaotic Nexus</h1>
    </div>
  </div>

  <nav class="flex flex-wrap items-center gap-3 text-sm text-slate-300">
    <a href="/dashboard" class="rounded-lg px-3 py-1 transition hover:bg-slate-800/80 hover:text-white">Dashboard</a>
    <a href="/jobs" class="rounded-lg px-3 py-1 transition hover:bg-slate-800/80 hover:text-white">Jobs</a>
    <a href="/customers" class="rounded-lg px-3 py-1 transition hover:bg-slate-800/80 hover:text-white">Customers</a>
    <a href="/powders" class="rounded-lg px-3 py-1 transition hover:bg-slate-800/80 hover:text-white">Powders</a>
    <a href="/inventory" class="rounded-lg px-3 py-1 transition hover:bg-slate-800/80 hover:text-white">Inventory</a>
  </nav>

  <div class="flex items-center gap-3">
    <div
      class="inline-flex items-center gap-2 rounded-full border border-slate-700/70 bg-slate-800/60 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-300"
    >
      {% if header_is_admin %}
        <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
        <span>Admin</span>
      {% elif header_username %}
        <span class="h-2 w-2 rounded-full bg-sky-400"></span>
        <span>{{ header_username }}</span>
      {% else %}
        <span class="h-2 w-2 rounded-full bg-amber-400"></span>
        <span>Guest</span>
      {% endif %}
    </div>
    <button
      type="button"
      data-theme-toggle
      class="inline-flex items-center gap-2 rounded-lg border border-slate-700/70 bg-slate-800/70 px-3 py-1.5 text-sm font-medium text-slate-200 transition hover:border-slate-500 hover:bg-slate-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-300"
    >
      <span class="h-2 w-2 rounded-full bg-emerald-400" data-theme-indicator></span>
      <span data-theme-label>Theme</span>
    </button>
    {% if header_is_admin or header_username %}
      <a
        href="/logout"
        class="inline-flex items-center gap-2 rounded-lg border border-transparent bg-emerald-500 px-3 py-1.5 text-sm font-semibold text-white transition hover:bg-emerald-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-300"
      >
        Logout
      </a>
    {% else %}
      <a
        href="/login"
        class="inline-flex items-center gap-2 rounded-lg border border-transparent bg-emerald-500 px-3 py-1.5 text-sm font-semibold text-white transition hover:bg-emerald-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-300"
      >
        Admin Login
      </a>
    {% endif %}
  </div>
</header>
