{% extends "customer_portal/base.html" %}
{% from "_macros/ui.html" import button_primary, button_secondary, card %}

{% block page_title %}Customer Portal{% endblock %}

{% block header %}
  {% include "_header_public.html" %}
{% endblock %}

{% block customer_content %}
<section class="space-y-16">
  <div class="grid gap-10 lg:grid-cols-[3fr,2fr] items-center">
    <div class="space-y-6">
      <span class="inline-flex items-center gap-2 rounded-full border border-emerald-400/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-emerald-200">
        Customer Portal
      </span>
      <h1 class="text-4xl font-semibold tracking-tight text-slate-100 lg:text-5xl">
        Give your customers the visibility they expectâ€”without endless emails.
      </h1>
      <p class="text-lg text-slate-300">
        The Victoria Powder Coating Customer Portal keeps project partners in the loop with live status updates, job history, and self-serve submissions. Ready in minutes, branded for your shop.
      </p>
      <div class="flex flex-wrap gap-3">
        {{ button_primary("Sign in", href=login_url) }}
        {{ button_secondary("Create account", href=register_url) }}
      </div>
      <div class="flex flex-wrap items-center gap-4 text-sm text-slate-400">
        <div class="flex items-center gap-2">
          <svg class="h-4 w-4 text-emerald-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          Secure, account-based access
        </div>
        <div class="flex items-center gap-2">
          <svg class="h-4 w-4 text-emerald-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          Works on desktop and mobile
        </div>
      </div>
    </div>
    <div class="relative">
      <div class="absolute -inset-4 rounded-3xl bg-emerald-500/10 blur-xl"></div>
      <div class="relative rounded-3xl border border-slate-800/70 bg-slate-900/70 p-6 shadow-2xl shadow-emerald-500/20">
        <div class="flex items-center justify-between text-sm text-slate-400">
          <span>Live status</span>
          <span class="inline-flex items-center gap-1 rounded-full border border-emerald-400/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-200">Updated</span>
        </div>
        <div class="mt-6 space-y-4">
          {% for step in steps %}
          <div class="rounded-2xl border border-slate-800/70 bg-slate-950/60 p-4">
            <div class="flex items-center justify-between text-sm text-slate-400">
              <span class="font-semibold text-slate-100">{{ step.number }}</span>
              <span>{{ step.title }}</span>
            </div>
            <p class="mt-2 text-sm text-slate-400">{{ step.description }}</p>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div class="space-y-6">
    <div class="flex flex-wrap items-center justify-between gap-4">
      <h2 class="text-2xl font-semibold text-slate-100">Why customers love it</h2>
      <a href="{{ login_url }}" class="text-sm text-emerald-300 hover:text-emerald-200 transition">Already onboarded? Sign in</a>
    </div>
    <div class="grid gap-4 md:grid-cols-3">
      {% for feature in features %}
      <article class="rounded-2xl border border-slate-800/70 bg-slate-900/70 p-6 shadow-lg shadow-slate-950/30">
        <div class="inline-flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-500/10 text-emerald-200 ring-1 ring-emerald-500/30">
          {% if feature.icon == 'clipboard' %}
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
          </svg>
          {% elif feature.icon == 'chat' %}
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h6m-2 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />
          </svg>
          {% else %}
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8l7 7 7-7" />
          </svg>
          {% endif %}
        </div>
        <h3 class="mt-4 text-lg font-semibold text-slate-100">{{ feature.title }}</h3>
        <p class="mt-2 text-sm text-slate-400">{{ feature.description }}</p>
      </article>
      {% endfor %}
    </div>
  </div>

  <div class="rounded-3xl border border-slate-800/70 bg-slate-900/70 p-10 shadow-xl shadow-slate-950/30">
    <div class="grid gap-6 md:grid-cols-[2fr,1fr] md:items-center">
      <div class="space-y-3">
        <h2 class="text-2xl font-semibold text-slate-100">Need a hand getting started?</h2>
        <p class="text-sm text-slate-400">
          Our support team can help link your existing jobs, invite teammates, and tailor the portal experience for your workflows.
        </p>
        <div class="flex flex-wrap gap-3 text-sm text-slate-300">
          <span class="inline-flex items-center gap-2 rounded-lg border border-slate-700/70 bg-slate-800/80 px-3 py-1.5">
            <svg class="h-4 w-4 text-emerald-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m0 4v12" />
            </svg>
            {{ support_email }}
          </span>
          <span class="inline-flex items-center gap-2 rounded-lg border border-slate-700/70 bg-slate-800/80 px-3 py-1.5">
            <svg class="h-4 w-4 text-emerald-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h2l3.6 7.59a1 1 0 01-.2 1.18l-2.4 2.4A1 1 0 007 17h10a1 1 0 00.8-.4l3-4a1 1 0 00-.8-1.6H7" />
            </svg>
            {{ support_phone }}
          </span>
        </div>
        <form method="post" class="mt-4 flex flex-wrap items-center gap-3">
          {% if csrf_token is defined %}
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          {% endif %}
          <label class="sr-only" for="contact-email">Business email</label>
          <input
            id="contact-email"
            name="email"
            type="email"
            placeholder="you@example.com"
            class="min-w-[220px] flex-1 rounded-lg border border-slate-700/70 bg-slate-950/70 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-500/40"
            required
          />
          <button
            type="submit"
            class="inline-flex items-center gap-2 rounded-lg border border-transparent bg-emerald-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-emerald-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-300"
          >
            Request onboarding
          </button>
        </form>
      </div>
      <div class="space-y-3 rounded-2xl border border-slate-800/70 bg-slate-950/60 p-6">
        <h3 class="text-base font-semibold text-slate-100">Popular actions</h3>
        <div class="grid gap-3">
          {{ button_primary("Sign in", href=login_url) }}
          {{ button_secondary("Register a customer", href=register_url) }}
          {{ button_secondary("Production intake", href=url_for('intake.intake_form')) }}
          {{ button_secondary("Railing intake", href=url_for('intake.railing_intake')) }}
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}


