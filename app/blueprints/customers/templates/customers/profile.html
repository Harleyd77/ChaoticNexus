{% extends "_layouts/base.html" %}
{% from "_macros/ui.html" import button_primary, button_secondary %}

{% block title %}Customer Profile{% endblock %}

{% block content %}
<section class="space-y-8">
  <header class="flex flex-col gap-4 rounded-2xl border border-slate-800/70 bg-slate-900/70 p-6 shadow-lg">
    <div>
      <h1 class="text-2xl font-semibold tracking-tight text-slate-100">{{ customer.company }}</h1>
      <p class="text-sm text-slate-400">Profile and details</p>
    </div>
    {% if is_admin %}
    <div>
      <button type="button" class="text-xs text-slate-400 underline hover:text-slate-200"
              hx-get="{{ url_for('admin.options_drawer') }}?name=priority" hx-target="#drawer-root" hx-swap="innerHTML">Edit Options</button>
    </div>
    {% endif %}
  </header>

  <div class="max-w-4xl">
    <form method="POST" class="space-y-6">
      {% if csrf_token is defined %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />{% endif %}

      <div class="rounded-2xl border border-slate-800/70 bg-slate-900/70 p-6 shadow-lg space-y-4">
        <h2 class="text-lg font-semibold text-slate-100">Essential Info</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="company">Company</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="company" name="company" value="{{ customer.company }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="contact_name">Contact Name</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="contact_name" name="contact_name" value="{{ customer.contact_name or '' }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="phone">Phone</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="phone" name="phone" value="{{ customer.phone or '' }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="email">Email</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="email" name="email" value="{{ customer.email or '' }}" />
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-slate-800/70 bg-slate-900/70 p-6 shadow-lg space-y-4">
        <h2 class="text-lg font-semibold text-slate-100">Address</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="street">Street</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="street" name="street" value="{{ customer.street or '' }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="city">City</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="city" name="city" value="{{ customer.city or '' }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="region">Region</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="region" name="region" value="{{ customer.region or '' }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="postal_code">Postal Code</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="postal_code" name="postal_code" value="{{ customer.postal_code or '' }}" />
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-slate-800/70 bg-slate-900/70 p-6 shadow-lg space-y-4">
        <h2 class="text-lg font-semibold text-slate-100">Business</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="account_number">Account #</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="account_number" name="account_number" value="{{ customer.account_number or '' }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="terms">Terms</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="terms" name="terms" value="{{ customer.terms or '' }}" />
          </div>
          <div>
            <label class="block text-sm mb-1 text-slate-300" for="status">Status</label>
            <input class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="status" name="status" value="{{ customer.status or '' }}" />
          </div>
        </div>
      </div>

      <div class="rounded-2xl border border-slate-800/70 bg-slate-900/70 p-6 shadow-lg">
        <label class="block text-sm mb-1 text-slate-300" for="notes">Notes</label>
        <textarea class="w-full px-3 py-2 rounded-lg bg-slate-950/70 border border-slate-800 text-slate-100" id="notes" name="notes" rows="4">{{ customer.notes or '' }}</textarea>
      </div>

      <div class="flex gap-3 justify-end">
        {{ button_secondary("Cancel", href=url_for('customers.index')) }}
        {{ button_primary("Save", type="submit") }}
      </div>
    </form>
  </div>
</section>
{% endblock %}


